<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ultimate Love Festival</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
body{
overflow:hidden;
min-height:100dvh;
background:
radial-gradient(circle at 20% 30%,#1a0033,transparent 60%),
radial-gradient(circle at 80% 70%,#000c2e,transparent 60%),
linear-gradient(#000814,#000);
color:white;
}

/* Canvas */
canvas{
position:fixed;
top:0;left:0;
}

/* Countdown */
.countdown{
position:fixed;
top:50%;left:50%;
transform:translate(-50%,-50%);
font-size:clamp(60px,12vw,150px);
font-weight:bold;
text-shadow:0 0 30px gold,0 0 80px hotpink,0 0 150px white;
z-index:10;
}

/* Final scene */
.finalScene{
position:fixed;
top:50%;left:50%;
transform:translate(-50%,-50%);
text-align:center;
opacity:0;
transition:2s;
z-index:30;
width:90%;
}

.newYear{
font-size:clamp(40px,8vw,110px);
font-weight:bold;
background:linear-gradient(90deg,#ffd700,#fff,#ff69b4,#ffd700);
background-size:300%;
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
animation:shine 5s linear infinite;
text-shadow:0 0 40px #ffd700,0 0 80px #ff69b4,0 0 120px #fff;
}

@keyframes shine{
0%{background-position:0%}
100%{background-position:300%}
}

.loveMessage{
margin-top:30px;
font-size:clamp(16px,2.2vw,24px);
line-height:1.8;
text-shadow:0 0 10px pink,0 0 20px hotpink;
}

/* Floating message bubbles */
.message{
position:fixed;
bottom:-60px;
padding:12px 18px;
background:rgba(255,105,180,0.92);
color:white;
border-radius:20px;
font-size:14px;
animation:floatUp 9s linear forwards;
box-shadow:0 0 20px hotpink;

/* QUAN TR·ªåNG */
max-width:85vw;
white-space:normal;          /* cho ph√©p xu·ªëng d√≤ng */
word-wrap:break-word;        /* tr√°nh tr√†n ch·ªØ */
text-align:center;
}



@keyframes floatUp{
0%{transform:translateY(0);opacity:0;}
10%{opacity:1;}
100%{transform:translateY(-110dvh);opacity:0;}
}
</style>
</head>

<body>

<div class="countdown" id="countdown">5</div>

<div class="finalScene" id="finalScene">
<h1 class="newYear">HAPPY NEW YEAR</h1>
<p class="loveMessage">
C·∫£m ∆°n em ƒë√£ ƒë·∫øn v√† l√†m nƒÉm v·ª´a qua tr·ªü n√™n √Ω nghƒ©a.<br>
NƒÉm m·ªõi n√†y, anh ch·ªâ mong ƒë∆∞·ª£c n·∫Øm tay em l√¢u h∆°n m·ªôt ch√∫t.<br>
Ch√∫c cho ch√∫ng ta lu√¥n b√™n nhau, y√™u th∆∞∆°ng v√† h·∫°nh ph√∫c.<br>
Em ch√≠nh l√† ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t m√† anh c√≥.
</p>
</div>

<canvas id="canvas"></canvas>

<script>
let heartActive = false;
let heartTime = 0;

const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

window.addEventListener("resize",()=>{
canvas.width=innerWidth;
canvas.height=innerHeight;
});

let rockets=[];
let particles=[];
let normalFireworksInterval=null;
let messageInterval=null;
let finaleStarted=false;

const colors=["#ff0040","#ff8000","#ffd700","#00ffcc","#00aaff","#ff66cc","#ffffff"];

function randomColor(){
return colors[Math.floor(Math.random()*colors.length)];
}

/* üöÄ PH√ÅO HOA TH∆Ø·ªúNG */
function launch(){
if(finaleStarted) return;
rockets.push({
x:Math.random()*canvas.width,
y:canvas.height,
speed:6+Math.random()*3,
targetY:Math.random()*canvas.height/2,
color:randomColor(),
final:false
});
}

/* üí• N·ªî */
function explode(x,y,color,final=false){

if(!final){
let count=250;
for(let i=0;i<count;i++){
particles.push({
x,y,
angle:Math.random()*Math.PI*2,
speed:Math.random()*8,
alpha:1,
color,
gravity:0.05,
size:2+Math.random()*2
});
}
}

/* ‚ù§Ô∏è FINALE TR√ÅI TIM */
if(final){
    heartActive = true;
    heartScale = 0;     // b·∫Øt ƒë·∫ßu nh·ªè
    heartTime = 0;
    document.getElementById("finalScene").style.opacity = 1;
}



}

let heartScale = 0;
let heartPulse = 0;
let neonOffset = 0;

function drawHeart(x,y){

    // ph√≥ng to m·∫°nh h∆°n
    let maxScale = Math.min(canvas.width, canvas.height) / 900;

if(heartScale < maxScale){
    heartScale += 0.03;
    }

    heartPulse += 0.05;
    let breathe = 1 + Math.sin(heartPulse) * 0.025;

    ctx.save();
    ctx.translate(x,y);
    ctx.scale(heartScale * breathe, heartScale * breathe);

    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.bezierCurveTo(-150,-150,-320,80,0,280);
    ctx.bezierCurveTo(320,80,150,-150,0,0);

    // Glow s√°t vi·ªÅn (kh√¥ng c√≤n m·∫£ng v√†ng loang)
    ctx.shadowBlur = 35;
    ctx.shadowColor = "rgba(255,170,60,0.9)";

    // Vi·ªÅn ch√≠nh d√†y h∆°n
    ctx.lineWidth = 16;
    ctx.strokeStyle = "#ff4d88";
    ctx.stroke();

    ctx.shadowBlur = 0;

    // Neon ch·∫°y v√≤ng ngo√†i
    neonOffset += 3;
    ctx.setLineDash([25,18]);
    ctx.lineDashOffset = -neonOffset;
    ctx.lineWidth = 6;
    ctx.strokeStyle = "#fff2a8";
    ctx.stroke();
    ctx.setLineDash([]);

    ctx.restore();

    // Ch·ªØ
    ctx.save();
    ctx.fillStyle = "#fff";
    ctx.textAlign = "center";
    ctx.font = "bold 90px Arial";
    ctx.shadowBlur = 35;
    ctx.shadowColor = "#ffcc66";
    ctx.font = "32px Arial";
    ctx.restore();
}



function animate(){
requestAnimationFrame(animate);
ctx.fillStyle="rgba(0,0,0,0.25)";
ctx.fillRect(0,0,canvas.width,canvas.height);

/* üöÄ ROCKET */
rockets.forEach((r,i)=>{
r.y-=r.speed;

ctx.beginPath();
ctx.arc(r.x,r.y,5,0,Math.PI*2);
ctx.fillStyle=r.color;
ctx.fill();

if(r.y<=r.targetY){

if(r.final){
explode(r.x,r.y,r.color,true);
}else{
explode(r.x,r.y,r.color,false);
}

rockets.splice(i,1);
}
});

/* ‚ú® PARTICLES */
particles.forEach((p,i)=>{
p.x+=Math.cos(p.angle)*p.speed;
p.y+=Math.sin(p.angle)*p.speed;
p.speed*=0.96;
p.y+=p.gravity;

if(p.fadeSlow){
    p.alpha -= 0.002;   // tan ch·∫≠m h∆°n
} else {
    p.alpha -= 0.01;
}


ctx.save();
ctx.beginPath();
ctx.shadowBlur=25;
ctx.shadowColor=p.color;
ctx.globalAlpha=p.alpha;
ctx.fillStyle=p.color;
ctx.arc(p.x,p.y,p.size||3,0,Math.PI*2);
ctx.fill();
ctx.restore();

if(p.alpha<=0)particles.splice(i,1);
});
if(heartActive){
        drawHeart(canvas.width/2, canvas.height/2.5);
    }
}
animate();

/* üíå MESSAGE */
function spawnMessage(){
if(finaleStarted) return;

const texts=[
"Anh y√™u em nhi·ªÅu l·∫Øm üíñ", "Em l√† ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t ‚ú®", "N·∫Øm tay nhau m√£i nh√© ü§ç", "Ch√∫ng ta s·∫Ω h·∫°nh ph√∫c üå∏", "Y√™u em h∆°n m·ªói ng√†y üíï", "M√£i b√™n nhau em nh√© üíû", "Anh lu√¥n t·ª± h√†o v√¨ c√≥ em üíé", "G·∫∑p ƒë∆∞·ª£c em l√† ƒëi·ªÅu may m·∫Øn nh·∫•t üéÅ", "C·∫£m ∆°n em v√¨ ƒë√£ ·ªü b√™n anh üíó", "NƒÉm m·ªõi m√¨nh y√™u nhau nhi·ªÅu h∆°n n·ªØa nh√© üíì", "Ch·ªâ c·∫ßn c√≥ em, m·ªçi th·ª© ƒë·ªÅu ƒë·ªß üå∑", "Em l√†m th·∫ø gi·ªõi c·ªßa anh s√°ng h∆°n üåü", "Anh mu·ªën c√πng em ƒëi qua m·ªçi m√πa üåà", "D√π th·∫ø n√†o anh v·∫´n ch·ªçn em üíù", "B√™n em l√† n∆°i b√¨nh y√™n nh·∫•t üå∫", "Anh th∆∞∆°ng em h∆°n nh·ªØng l·ªùi anh n√≥i üíå", "C∆∞·ªùi l√™n nh√© c√¥ g√°i c·ªßa anh üòä", "Ch√∫ng ta s·∫Ω c√πng nhau gi√† ƒëi üë©‚Äç‚ù§Ô∏è‚Äçüë®", "M·ªói ng√†y c√≥ em l√† m·ªôt m√≥n qu√† üéÄ", "Em ch√≠nh l√† gi·∫•c m∆° ƒë·∫πp nh·∫•t üí§", "Y√™u em l√† ƒëi·ªÅu anh ch∆∞a t·ª´ng h·ªëi h·∫≠n üíû", "Ch·ªâ c·∫ßn em ·ªü ƒë√≥, anh lu√¥n ·ªïn üí´", "C√πng nhau ƒë√≥n th√™m nhi·ªÅu nƒÉm m·ªõi n·ªØa nh√© üéÜ", "Anh s·∫Ω lu√¥n b·∫£o v·ªá n·ª• c∆∞·ªùi ·∫•y üòä", "M√£i l√† ng∆∞·ªùi quan tr·ªçng nh·∫•t c·ªßa anh üíò", "Y√™u em t·ª´ h√¥m qua, h√¥m nay v√† m√£i m√£i üíç", "Thanh xu√¢n c·ªßa anh c√≥ em l√† ƒë·ªß üåº", "C·∫£m ∆°n v√¨ ƒë√£ b∆∞·ªõc v√†o cu·ªôc ƒë·ªùi anh üåπ", "Anh th√≠ch c√°ch em l√†m tr√°i tim anh rung ƒë·ªông üíì", "NƒÉm m·ªõi, y√™u em nhi·ªÅu h∆°n nƒÉm c≈© ‚ù§Ô∏è" ];

const msg=document.createElement("div");
msg.className="message";
msg.innerText=texts[Math.floor(Math.random()*texts.length)];

msg.style.left = Math.random() * (window.innerWidth - 200) + "px";

msg.style.fontSize=(14+Math.random()*6)+"px";
msg.style.animationDuration=(7+Math.random()*3)+"s";

document.body.appendChild(msg);
setTimeout(()=>msg.remove(),10000);
}

/* ‚è≥ COUNTDOWN */
let count=5;
let cd=document.getElementById("countdown");
cd.textContent=count;

let timer=setInterval(()=>{

if(count>1){
count--;
cd.textContent=count;
}else{
clearInterval(timer);
cd.textContent="0";

setTimeout(()=>{

cd.style.display="none";

/* START SHOW */
normalFireworksInterval=setInterval(launch,400);
messageInterval=setInterval(spawnMessage,1200);

/* AFTER 8s ‚Üí FINALE */
setTimeout(()=>{

finaleStarted=true;

/* D·ª™NG M·ªåI TH·ª® */
clearInterval(normalFireworksInterval);
clearInterval(messageInterval);
rockets=[];

/* B·∫ÆN DUY NH·∫§T 1 QU·∫¢ CU·ªêI */
rockets.push({
x:canvas.width/2,
y:canvas.height,
speed:9,
targetY:canvas.height/3,
color:"#ff0040",
final:true
});

},8000);

},500);

}

},1000);
</script>

</body>
</html>

